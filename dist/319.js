/*! For license information please see 319.js.LICENSE.txt */
"use strict";(self.webpackChunkcitylights=self.webpackChunkcitylights||[]).push([[319],{3550:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommandEntityBuilder=void 0;const n=r(7983),o=r(6002);n.__exportStar(r(71),t);t.CommandEntityBuilder=class{constructor(e){this.commands=e,this.entity=new o.Entity}build(){this.commands.aggregator.addCommand((()=>this.commands.world.addEntity(this.entity)))}with(e,...t){return this.entity.addComponent(this.asComponent(e)),this}withAll(...e){let t;for(t of e)this.with(t);return this}asComponent(e,...t){return"object"==typeof e?e:new(e.prototype.constructor.bind(e,...Array.from(arguments).slice(1)))}}},71:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4055:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommandsAggregator=void 0;r(7983).__exportStar(r(5596),t);t.CommandsAggregator=class{constructor(e){this.world=e,this.commands=[],this.doMaintain=!1}addCommand(e){this.commands.push(e)}async executeAll(){for(let e=this.commands.shift();e;e=this.commands.shift())await e();this.doMaintain&&this.world.maintain()}triggerMaintain(){this.doMaintain=!0}}},5596:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},3521:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Commands=void 0;const n=r(7983),o=r(3550);n.__exportStar(r(879),t);t.Commands=class{constructor(e,t){this.world=e,this.aggregator=t}addEntity(e){this.aggregator.addCommand((()=>this.world.addEntity(e)))}addResource(e,...t){let r,n;if("object"==typeof e?(r=e.constructor,n=e):(r=e,n=new(e.prototype.constructor.bind(e,...Array.from(arguments).slice(1)))),this.world.resources.has(r))throw new Error(`Resource with name "${r.name}" already exists!`);return this.aggregator.addCommand((()=>{if(this.world.resources.has(r))throw new Error(`Resource with name "${r.name}" already exists!`);this.world.resources.set(r,n)})),n}buildEntity(){return new o.CommandEntityBuilder(this)}clearEntities(){this.aggregator.addCommand((()=>this.world.entities.clear()))}load(e,t){const r=this.world.groups.nextHandle++;return this.aggregator.addCommand((()=>{this.world.load(e,t,r)})),r}maintain(){this.aggregator.triggerMaintain()}merge(e){const t=this.world.groups.nextHandle++;return this.aggregator.addCommand((()=>{this.world.merge(e,t)})),t}popState(){this.aggregator.addCommand((()=>this.world.popState()))}pushState(e){this.aggregator.addCommand((()=>this.world.pushState(e)))}queueCommand(e){this.aggregator.addCommand(e)}removeEntity(e){this.aggregator.addCommand((()=>this.world.removeEntity(e)))}removeResource(e){if(!this.world.resources.has(e))throw new Error(`Resource with name "${e.name}" does not exists!`);this.aggregator.addCommand((()=>{if(!this.world.resources.has(e))throw new Error(`Resource with name "${e.name}" does not exists!`);this.world.resources.delete(e)}))}replaceResource(e,...t){let r;if(r="object"==typeof e?e.constructor:e,!this.world.resources.has(r))throw new Error(`Resource with name "${r.name}" does not exists!`);this.aggregator.addCommand((()=>{if(!this.world.resources.has(r))throw new Error(`Resource with name "${r.name}" does not exists!`);this.world.resources.delete(r),this.world.addResource(e,...t)}))}stopRun(){this.aggregator.addCommand((()=>this.world.stopRun()))}unloadPrefab(e){this.aggregator.addCommand((()=>this.world.unloadPrefab(e)))}}},879:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7265:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ECS=void 0;const n=r(8622);class o{constructor(){this.worlds=new Map}buildWorld(e){return new n.WorldBuilder(this).addCallback((t=>this.worlds.set(t,{name:e,world:t})))}removeWorld(e){this.worlds.delete(e)}}t.ECS=o,t.default=o},373:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EntityBuilder=void 0;const n=r(7983),o=r(6002);n.__exportStar(r(5972),t);t.EntityBuilder=class{constructor(){this.entity=new o.Entity}build(){return this.entity}with(e,...t){return this.entity.addComponent(this.asComponent(e)),this}withAll(...e){let t;for(t of e)this.with(t);return this}asComponent(e,...t){return"object"==typeof e?e:new(e.prototype.constructor.bind(e,...Array.from(arguments).slice(1)))}}},5972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6002:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Entity=void 0;r(7983).__exportStar(r(1182),t);t.Entity=class{constructor(){this.components=new Map,this.tags=new Set}addComponent(e){if(this.hasComponent(e.constructor))throw new Error(`Component "${e.constructor.name}" already exists on entity!`);return this.components.set(e.constructor,e),this}addTag(e){return this.tags.add(e),this}getComponent(e){return this.components.get(e)}getComponents(){return this.components.values()}getTags(){return this.tags.values()}hasComponent(e){return this.components.has(e)}hasTag(e){return this.tags.has(e)}removeComponent(e){return this.components.delete(e.constructor),this}removeTag(e){return this.tags.delete(e),this}}},1182:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},5038:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(7983);n.__exportStar(r(7265),t),n.__exportStar(r(6002),t),n.__exportStar(r(373),t),n.__exportStar(r(1369),t),n.__exportStar(r(4516),t),n.__exportStar(r(7817),t),n.__exportStar(r(8165),t),n.__exportStar(r(2205),t),n.__exportStar(r(9905),t)},5327:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PushDownAutomaton=void 0;t.PushDownAutomaton=class{get state(){return this.currentState}clear(){this.currentState=void 0,this.statesTail=void 0}pop(){var e;if(!this.statesTail)return;const t=this.statesTail;return this.statesTail=this.statesTail.prevNode,this.currentState=null===(e=this.statesTail)||void 0===e?void 0:e.state,t.state}push(e){this.currentState=new e,this.statesTail={prevNode:this.statesTail,state:this.currentState}}}},1369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WithoutTag=t.Without=t.WithTag=t.With=t.Write=t.Read=t.ReadEntity=t.Query=void 0;const n=r(7983),o=r(7349),i=r(6002);n.__exportStar(r(7349),t);class s{constructor(e){this.queryDescriptor=e,this.queryResult=new Map}get descriptor(){return this.queryDescriptor}[o.addEntitySym](e){this.matchesEntity(e)&&(Array.isArray(this.queryDescriptor)?this.queryResult.set(e,e):this.queryResult.set(e,this.getDataFromEntity(e,this.queryDescriptor)))}[o.clearEntitiesSym](){this.queryResult.clear()}[o.removeEntitySym](e){this.queryResult.delete(e)}[o.setEntitiesSym](e){let t;for(t of(this.queryResult.clear(),e))this[o.addEntitySym](t)}execute(e){let t;for(t of this.queryResult.values())e(t)}getDataFromEntity(e,t){const r={};let n;for(n of Object.entries(t))n[1][o.accessDescSym].type==o.EAccess.meta?n[1][o.accessDescSym].targetType==o.ETargetType.entity&&(r[n[0]]=e):r[n[0]]=e.getComponent(n[1][o.accessDescSym].target);return r}iter(e){if(e){const t=[],r=e.getEntities(this);let n;for(n of r)t.push(this.getDataFromEntity(n,this.queryDescriptor));return t.values()}return this.queryResult.values()}matchesEntity(e){if(Array.isArray(this.queryDescriptor)){let t;for(t of this.queryDescriptor){if(t[o.existenceDescSym].targetType==o.ETargetType.tag&&e.hasTag(t[o.existenceDescSym].target)!=(t[o.existenceDescSym].type==o.EExistence.set))return!1;if(t[o.existenceDescSym].targetType==o.ETargetType.component&&e.hasComponent(t[o.existenceDescSym].target)!=(t[o.existenceDescSym].type==o.EExistence.set))return!1}}else{let t;for(t of Object.values(this.queryDescriptor)){if(t[o.accessDescSym].targetType==o.ETargetType.tag&&!e.hasTag(t[o.accessDescSym].target))return!1;if(t[o.accessDescSym].targetType==o.ETargetType.component&&!e.hasComponent(t[o.accessDescSym].target))return!1}}return!0}}t.Query=s,t.ReadEntity=function(){return Object.assign({},i.Entity,{[o.accessDescSym]:{target:i.Entity,targetType:o.ETargetType.entity,type:o.EAccess.meta}})},t.Read=function(e){return Object.assign({},e.prototype,{[o.accessDescSym]:{target:e,targetType:o.ETargetType.component,type:o.EAccess.read}})},t.Write=function(e){return Object.assign({},e.prototype,{[o.accessDescSym]:{target:e,targetType:o.ETargetType.component,type:o.EAccess.write}})},t.With=function(e){return{[o.existenceDescSym]:{target:e,targetType:o.ETargetType.component,type:o.EExistence.set}}},t.WithTag=function(e){return{[o.accessDescSym]:{target:e,targetType:o.ETargetType.tag,type:o.EAccess.meta},[o.existenceDescSym]:{target:e,targetType:o.ETargetType.tag,type:o.EExistence.set}}},t.Without=function(e){return{[o.existenceDescSym]:{target:e,targetType:o.ETargetType.component,type:o.EExistence.unset}}},t.WithoutTag=function(e){return{[o.existenceDescSym]:{target:e,targetType:o.ETargetType.tag,type:o.EExistence.unset}}}},7349:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ETargetType=t.EExistence=t.EAccess=t.existenceDescSym=t.accessDescSym=t.setEntitiesSym=t.removeEntitySym=t.clearEntitiesSym=t.addEntitySym=void 0,t.addEntitySym=Symbol(),t.clearEntitiesSym=Symbol(),t.removeEntitySym=Symbol(),t.setEntitiesSym=Symbol(),t.accessDescSym=Symbol(),t.existenceDescSym=Symbol(),function(e){e[e.meta=0]="meta",e[e.read=1]="read",e[e.write=2]="write"}(t.EAccess||(t.EAccess={})),function(e){e[e.set=0]="set",e[e.unset=1]="unset"}(t.EExistence||(t.EExistence={})),function(e){e[e.component=0]="component",e[e.entity=1]="entity",e[e.tag=2]="tag"}(t.ETargetType||(t.ETargetType={}))},1636:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultDeserializer=t.getDefaultSerializer=void 0;t.getDefaultSerializer=function(e){return t=>{let r=typeof t;switch(typeof t){case"number":return t;case"object":if(null==t)return"null";switch(r=t.constructor.name,t.constructor.name){case"Date":return t.getTime();case"Array":case"Object":return JSON.stringify(t.toString());case"Map":case"Set":return JSON.stringify(Array.from(t));case"Number":return t}break;case"string":return JSON.stringify(t)}if(!e)throw new Error(`Missing serializer for "${r}"!`);return e(t)}};t.getDefaultDeserializer=function(e){return(t,r)=>{switch(t.toLowerCase()){case"array":if(!Array.isArray(r))throw new Error(`Cannot deserialize Array with data of type ${typeof r}! Array expected!`);return r;case"date":if("number"!=typeof r)throw new Error(`Cannot deserialize Date with data of type ${typeof r}! Number expected!`);return new Date(r);case"map":if(!Array.isArray(r))throw new Error(`Cannot deserialize Map with data of type ${typeof r}! Array of arrays expected!`);return new Map(r);case"number":if("number"!=typeof r)throw new Error(`Cannot deserialize Number with data of type ${typeof r}! Number expected!`);return r;case"object":if("object"!=typeof r)throw new Error(`Cannot deserialize Object with data of type ${typeof r}! Object expected!`);return r;case"set":if(!Array.isArray(r))throw new Error(`Cannot deserialize Set with data of type ${typeof r}! Array expected!`);return new Set(r);case"string":if("string"!=typeof r)throw new Error(`Cannot deserialize String with data of type ${typeof r}! String expected!`);return r}if(!e)throw new Error(`Missing deserializer for "${t}"!`);return e(t,r)}}},4516:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SerDe=void 0;const n=r(7983),o=r(6633),i=r(7817),s=r(1636),a=r(6002);n.__exportStar(r(6633),t);t.SerDe=class{constructor(){this.typeHandlers=new Map}deserialize(e,t){var r,n;const i={useDefaultHandler:null===(r=null==t?void 0:t.useDefaultHandler)||void 0===r||r,useRegisteredHandlers:null===(n=null==t?void 0:t.useRegisteredHandlers)||void 0===n||n,fallbackHandler:null==t?void 0:t.fallbackHandler},c=[];let u,l,d,E,_;for(E of e){for([d,l]of(u=new a.Entity,Object.entries(E)))if(i.useRegisteredHandlers&&this.typeHandlers.has(d))u.addComponent(this.typeHandlers.get(d).deserializer(l));else if(d==o.CTagMarker){if(!Array.isArray(l))throw new Error("Expected array of tags for the hash identifier!");for(_ of l){if(!["string","number"].includes(typeof _))throw new Error("Tags must be of type string or number!");u.addTag(_)}}else i.useDefaultHandler&&u.addComponent(s.getDefaultDeserializer(i.fallbackHandler)(d,l));c.push(u)}return{entities:c.values()}}getRegisteredTypeHandlers(){return this.typeHandlers.entries()}registerTypeHandler(e,t,r){if(this.typeHandlers.has(e.name))throw new Error(`The type "${e.name}" was already registered!`);this.typeHandlers.set(e.name,{deserializer:t,serializer:r})}serialize(e,t){var r,n;const a={useDefaultHandler:null===(r=null==t?void 0:t.useDefaultHandler)||void 0===r||r,useRegisteredHandlers:null===(n=null==t?void 0:t.useRegisteredHandlers)||void 0===n||n,fallbackHandler:null==t?void 0:t.fallbackHandler},c=new i.SerialFormat;let u,l,d,E,_;for(l of e.entities){for(u of(E={},l.getComponents()))a.useRegisteredHandlers&&this.typeHandlers.has(u.constructor.name)?d=this.typeHandlers.get(u.constructor.name).serializer(u):a.useDefaultHandler&&(d=s.getDefaultSerializer(a.fallbackHandler)(u)),E[u.constructor.name]=d,d=void 0;_=Array.from(l.getTags()),_.length>0&&(E[o.CTagMarker]=_),c.push(E)}return c}}},6633:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CTagMarker=void 0,t.CTagMarker="#Tags"},7817:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SerialFormat=void 0;r(7983).__exportStar(r(4572),t);class n extends Array{static fromArray(e){return(new n).fromArray(e)}static fromJSON(e){return(new n).fromJSON(e)}fromArray(e){return Object.assign(this,e),this}fromJSON(e){this.length=0;const t=JSON.parse(e);if(!Array.isArray(t))throw new Error("Input JSON must be an array!");for(const e of t)this.push(e);return this}toJSON(e){return JSON.stringify(Array.from(this),void 0,e)}}t.SerialFormat=n},4572:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8165:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;r(7983).__exportStar(r(6733),t);t.State=class{constructor(e=[]){this._systems=e}get systems(){return this._systems}activate(e){}create(e){}deactivate(e){}destroy(e){}}},6733:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2205:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.System=void 0;r(7983).__exportStar(r(4237),t);t.System=class{destroy(e){}setup(e){}}},4237:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8622:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._=t.WorldBuilder=void 0;const n=r(9905),o=r(4516);function i(e,t){if("object"!=typeof t)throw new Error(`Cannot default-deserialize ${e.name}, because the data is of type ${typeof t}!`);const r=new e;for(const e of Object.entries(t))r[e[0]]=e[1];return r}function s(e){return e}t.WorldBuilder=class{constructor(e){this.ecs=e,this.callbacks=new Set,this.serde=new o.SerDe,this.systemInfos=new Map}addCallback(e){return this.callbacks.add(e),this}build(){const e=new n.World(this.ecs,new Set(this.systemInfos.values()),this.serde);for(const t of this.callbacks)t(e);return e}withSystem(e,t){if(this.systemInfos.has(e))throw new Error(`The system ${e.constructor.name} is already registered!`);return this.systemInfos.set(e,{system:new e,dependencies:new Set(t)}),this}withComponent(e,t){var r,n,o,a;return this.serde.registerTypeHandler(e,null!==(n=null===(r=null==t?void 0:t.serDe)||void 0===r?void 0:r.deserializer)&&void 0!==n?n:i.bind(void 0,e),null!==(a=null===(o=null==t?void 0:t.serDe)||void 0===o?void 0:o.serializer)&&void 0!==a?a:s),this}withComponents(...e){for(const t of e)this.withComponent(t);return this}},t._={dataStructDeserializer:i,dataStructSerializer:s}},9905:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.World=void 0;const n=r(7983),o=r(6002),i=r(373),s=r(8165),a=r(5327),c=r(4516),u=r(3521),l=r(4055),d=r(1369);n.__exportStar(r(2454),t);t.World=class{constructor(e,t=new Set,r=new c.SerDe){this.ecs=e,this.systemInfos=t,this._serde=r,this._dirty=!1,this.entities=new Set,this.pda=new a.PushDownAutomaton,this.groups={nextHandle:0,entityLinks:new Map},this.queries=[],this.resources=new Map,this.runExecutionPipeline=[],this.runExecutionPipelineCache=new Map,this.runPromise=void 0,this.shouldRunSystems=!1;const n=this;this._commandsAggregator=new l.CommandsAggregator(this),this._commands=new u.Commands(this,this._commandsAggregator),this.systemWorld=Object.freeze({get commands(){return n._commands},get currentState(){return n.pda.state},getEntities:this.getEntities.bind(this),getResource:this.getResource.bind(this)}),this.transitionWorld=Object.freeze({get commands(){return n._commands},get currentState(){return n.pda.state},get serde(){return n.serde},buildEntity:this.buildEntity.bind(this),flushCommands:this.flushCommands.bind(this),getEntities:this.getEntities.bind(this),getResource:this.getResource.bind(this),getResources:this.getResources.bind(this),maintain:this.maintain.bind(this),save:this.save.bind(this)}),this.sortedSystems=this.sortSystems(this.systemInfos);for(const e of this.systemInfos)e.system.query&&this.queries.push(e.system.query)}get commands(){return this._commands}get dirty(){return this._dirty}get running(){return this.shouldRunSystems}get serde(){return this._serde}addEntity(e){this.entities.has(e)||(this.entities.add(e),this._dirty=!0)}addResource(e,...t){let r,n;if("object"==typeof e?(r=e.constructor,n=e):(r=e,n=new(e.prototype.constructor.bind(e,...Array.from(arguments).slice(1)))),this.resources.has(r))throw new Error(`Resource with name "${r.name}" already exists!`);return this.resources.set(r,n),n}buildEntity(){return new i.EntityBuilder}clearEntities(){this.entities.clear()}createEntity(){const e=new o.Entity;return this.entities.add(e),this._dirty=!0,e}async dispatch(e){await this.run({initialState:e,afterStepHandler:e=>e.commands.stopRun()})}flushCommands(){return this._commandsAggregator.executeAll()}getEntities(e){if(!e)return this.entities.keys();const t=new Set;let r;for(r of this.entities.keys())e.matchesEntity(r)&&t.add(r);return t.values()}getResource(e){if(!this.resources.has(e))throw new Error(`Resource of type "${e.name}" does not exist!`);return this.resources.get(e)}getResources(){return this.resources.values()}load(e,t,r){const n=[],o=null!=r?r:this.groups.nextHandle++;let i;for(i of this._serde.deserialize(e,t).entities)this.addEntity(i),n.push(i);return this.groups.entityLinks.set(o,n),o}maintain(){let e;for(e of this.queries)e[d.setEntitiesSym](this.entities.values());this._dirty=!1}merge(e,t){const r=null!=t?t:this.groups.nextHandle++,n=[];let o;for(o of e.getEntities())this.addEntity(o),n.push(o);return[r,n]}async popState(){var e,t;await(null===(e=this.pda.pop())||void 0===e?void 0:e.deactivate(this.transitionWorld));const r=this.pda.state;r?(await r.activate(this.transitionWorld),this.runExecutionPipeline=null!==(t=this.runExecutionPipelineCache.get(r.constructor))&&void 0!==t?t:[]):this.runExecutionPipeline=[]}prepareExecutionPipeline(e){const t=[],r=e.systems;let n,o,i=new Set;for(o of(0==this.sortedSystems.size&&this.sortSystems(this.systemInfos),this.sortedSystems))n=!!r.find((e=>e.prototype.constructor.name===o.system.constructor.name)),n&&(o.dependencies.size>0&&(t.push(i),i=new Set),i.add(o.system));return t.push(i),t}async pushState(e){var t,r;await(null===(t=this.pda.state)||void 0===t?void 0:t.deactivate(this.transitionWorld)),this.pda.push(e);const n=this.pda.state,o=Array.from(this.systemInfos).map((e=>e.system.constructor.name));for(const e of n.systems)if(!o.includes(e.name))throw new Error(`Did you forget to register System ${e.name}?`);this.runExecutionPipelineCache.has(e)?this.runExecutionPipeline=null!==(r=this.runExecutionPipelineCache.get(e))&&void 0!==r?r:[]:(n.create(this.transitionWorld),this.runExecutionPipeline=this.prepareExecutionPipeline(n),this.runExecutionPipelineCache.set(e,this.runExecutionPipeline)),await n.activate(this.transitionWorld)}async prepareRun(e){var t,r,n;if(this.runPromise)throw new Error("The dispatch loop is already running!");this._dirty&&this.maintain(),e||(e={});const o=e.initialState?e.initialState:s.State.bind(void 0,Array.from(this.systemInfos.values()).map((e=>e.system.constructor))),i={afterStepHandler:null!==(t=e.afterStepHandler)&&void 0!==t?t:e=>{},beforeStepHandler:null!==(r=e.beforeStepHandler)&&void 0!==r?r:e=>{},executionFunction:null!==(n=e.executionFunction)&&void 0!==n?n:"function"==typeof requestAnimationFrame?requestAnimationFrame:setTimeout,initialState:o};this.pda.clear(),this.shouldRunSystems=!0;for(const e of this.systemInfos)await e.system.setup(this.systemWorld);return await this.pushState(o),this.runExecutionPipeline=this.prepareExecutionPipeline(this.pda.state),this.lastRunPreparation=i,i}removeEntity(e){this.entities.delete(e),this._dirty=!0}removeEntityFromSystems(e){this.removeEntity(e),this.maintain()}replaceEntitiesWith(e){this.clearEntities(),this.merge(e)}replaceResource(e,...t){let r;if(r="object"==typeof e?e.constructor:e,!this.resources.has(r))throw new Error(`Resource with name "${r.name}" does not exists!`);this.resources.delete(r),this.addResource(e,...t)}removeResource(e){if(!this.resources.has(e))throw new Error(`Resource with name "${e.name}" does not exists!`);this.resources.delete(e)}run(e,t=!1){const r=new Promise((async n=>{let o;if(await this._commandsAggregator.executeAll(),o=t?this.lastRunPreparation:await this.prepareRun(e),!o)throw new Error("Cannot run without preparing the run!");this.runPromise=r;const i=o.afterStepHandler,s=o.beforeStepHandler,a=o.executionFunction;let c;const u=async()=>{var e;await(null===(e=this.pda.state)||void 0===e?void 0:e.deactivate(this.transitionWorld));for(let e=this.pda.pop();e;e=this.pda.pop())await e.destroy(this.transitionWorld);for(const e of this.systemInfos)await e.system.destroy(this.systemWorld);this.runExecutionPipelineCache.clear(),this.runPromise=void 0,n()},l=async()=>{if(this.shouldRunSystems){await s(this.transitionWorld);{let e,t;for(e of this.runExecutionPipeline){for(t of(c=[],e))c.push(t.run(this.systemWorld));await Promise.all(c)}}await i(this.transitionWorld),await this._commandsAggregator.executeAll(),a(l)}else await u()};a(l)}));return r}sortSystems(e){const t=Array.from(e),r=new Map(t.map((e=>[e.system.constructor,Array.from(e.dependencies)])));let n;const o=[],i=Array.from(r.entries()).filter((e=>0===e[1].length)).map((e=>e[0]));let s,a;for(;i.length>0;){s=i.shift(),o.push(s);for(let e of Array.from(r.entries()).filter((e=>e[1].includes(s))).map((e=>e[0])))n=r.get(e),n.splice(n.indexOf(s),1),n.length<=0&&i.push(e)}if(Array.from(r.values()).find((e=>e.length>0)))throw new Error("The system dependency graph is cyclic!");return new Set(o.map((e=>{if(a=t.find((t=>t.system.constructor==e)),!a)throw new Error(`The system ${e.name} was not registered!`);return a})))}stopRun(){this.shouldRunSystems=!1}save(e,t){return this.serde.serialize({entities:this.getEntities(e)},t)}unloadPrefab(e){if(!this.groups.entityLinks.has(e))throw new Error(`Could not find any loaded prefab under handle "${e}"!`);let t;for(t of this.groups.entityLinks.get(e))this.removeEntity(t);this.groups.entityLinks.delete(e)}}},2454:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7983:(e,t,r)=>{r.r(t),r.d(t,{__extends:()=>o,__assign:()=>i,__rest:()=>s,__decorate:()=>a,__param:()=>c,__metadata:()=>u,__awaiter:()=>l,__generator:()=>d,__createBinding:()=>E,__exportStar:()=>_,__values:()=>h,__read:()=>f,__spread:()=>y,__spreadArrays:()=>p,__spreadArray:()=>m,__await:()=>g,__asyncGenerator:()=>w,__asyncDelegator:()=>A,__asyncValues:()=>O,__makeTemplateObject:()=>C,__importStar:()=>S,__importDefault:()=>v,__classPrivateFieldGet:()=>b,__classPrivateFieldSet:()=>L});var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function a(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function d(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var E=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function _(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||E(t,e,r)}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function p(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n}function m(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||t)}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function w(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=o[e](t)).value instanceof g?Promise.resolve(r.value.v).then(c,u):l(i[0][2],r)}catch(e){l(i[0][3],e)}var r}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function A(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:g(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function O(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=h(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,o,(t=e[r](t)).done,t.value)}))}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var D=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&E(t,e,r);return D(t,e),t}function v(e){return e&&e.__esModule?e:{default:e}}function b(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function L(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}},1643:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n=async(...e)=>{const t=WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),n=await(t?Promise.all([r.e(392),r.e(100)]).then(r.bind(r,392)):Promise.all([r.e(309),r.e(529)]).then(r.bind(r,1309))),{default:o}=n;return await o(...e)}},186:(e,t,r)=>{r.r(t),r.d(t,{CODE_0:()=>eo,CODE_1:()=>to,CODE_2:()=>ro,CODE_3:()=>no,CODE_4:()=>oo,CODE_5:()=>io,CODE_6:()=>so,CODE_7:()=>ao,CODE_8:()=>co,CODE_9:()=>uo,CODE_A:()=>lo,CODE_ALT_LEFT:()=>Vn,CODE_ALT_RIGHT:()=>Nn,CODE_B:()=>Eo,CODE_BACK_QUOTE:()=>Ri,CODE_BACK_SLASH:()=>xi,CODE_BACK_SPACE:()=>Un,CODE_C:()=>_o,CODE_CAPS_LOCK:()=>In,CODE_CLOSE_BRACKET:()=>Yi,CODE_COMMA:()=>Ti,CODE_CONTEXT_MENU:()=>Io,CODE_CONTROL_LEFT:()=>xn,CODE_CONTROL_RIGHT:()=>Yn,CODE_D:()=>ho,CODE_DASH:()=>Ln,CODE_DELETE:()=>Zn,CODE_DOWN:()=>Qn,CODE_E:()=>fo,CODE_END:()=>Bn,CODE_ENTER:()=>Kn,CODE_EQUALS:()=>Pn,CODE_ESCAPE:()=>vn,CODE_F:()=>yo,CODE_F1:()=>oi,CODE_F10:()=>_i,CODE_F11:()=>hi,CODE_F12:()=>fi,CODE_F13:()=>yi,CODE_F14:()=>pi,CODE_F15:()=>mi,CODE_F16:()=>gi,CODE_F17:()=>wi,CODE_F18:()=>Ai,CODE_F19:()=>Oi,CODE_F2:()=>ii,CODE_F20:()=>Ci,CODE_F21:()=>Di,CODE_F22:()=>Si,CODE_F23:()=>vi,CODE_F24:()=>bi,CODE_F3:()=>si,CODE_F4:()=>ai,CODE_F5:()=>ci,CODE_F6:()=>ui,CODE_F7:()=>li,CODE_F8:()=>di,CODE_F9:()=>Ei,CODE_G:()=>po,CODE_H:()=>mo,CODE_HOME:()=>zn,CODE_I:()=>go,CODE_INSERT:()=>Xn,CODE_J:()=>wo,CODE_K:()=>Ao,CODE_L:()=>Oo,CODE_LEFT:()=>qn,CODE_M:()=>Co,CODE_META_LEFT:()=>Yo,CODE_META_RIGHT:()=>No,CODE_MINUS:()=>bn,CODE_N:()=>Do,CODE_NUMPAD0:()=>Ho,CODE_NUMPAD1:()=>ko,CODE_NUMPAD2:()=>Wo,CODE_NUMPAD3:()=>Bo,CODE_NUMPAD4:()=>zo,CODE_NUMPAD5:()=>qo,CODE_NUMPAD6:()=>$o,CODE_NUMPAD7:()=>Go,CODE_NUMPAD8:()=>Qo,CODE_NUMPAD9:()=>Jo,CODE_NUMPAD_ADD:()=>Zo,CODE_NUMPAD_DECIMAL:()=>ti,CODE_NUMPAD_DIVIDE:()=>ri,CODE_NUMPAD_ENTER:()=>ni,CODE_NUMPAD_MULTIPLY:()=>Xo,CODE_NUMPAD_SUBTRACT:()=>ei,CODE_NUM_LOCK:()=>Li,CODE_O:()=>So,CODE_OPEN_BRACKET:()=>Mi,CODE_OS_LEFT:()=>Vo,CODE_OS_RIGHT:()=>jo,CODE_P:()=>vo,CODE_PAGE_DOWN:()=>Wn,CODE_PAGE_UP:()=>kn,CODE_PAUSE:()=>jn,CODE_PERIOD:()=>Ki,CODE_PRINTSCREEN:()=>Jn,CODE_Q:()=>bo,CODE_QUOTE:()=>Vi,CODE_R:()=>Lo,CODE_RETURN:()=>Fn,CODE_RIGHT:()=>Gn,CODE_S:()=>Po,CODE_SCROLL_LOCK:()=>Pi,CODE_SEMICOLON:()=>Ui,CODE_SHIFT_LEFT:()=>Rn,CODE_SHIFT_RIGHT:()=>Mn,CODE_SLASH:()=>Fi,CODE_SPACE:()=>Hn,CODE_T:()=>Uo,CODE_TAB:()=>Tn,CODE_U:()=>To,CODE_UNIDENTIFIED:()=>Sn,CODE_UP:()=>$n,CODE_V:()=>Ko,CODE_W:()=>Fo,CODE_X:()=>Ro,CODE_Y:()=>Mo,CODE_Z:()=>xo,KEY_0:()=>b,KEY_1:()=>L,KEY_2:()=>P,KEY_3:()=>U,KEY_4:()=>T,KEY_5:()=>K,KEY_6:()=>F,KEY_7:()=>R,KEY_8:()=>M,KEY_9:()=>x,KEY_A:()=>Y,KEY_ADD:()=>Ce,KEY_ALT:()=>d,KEY_B:()=>V,KEY_BACK_QUOTE:()=>it,KEY_BACK_SLASH:()=>at,KEY_BACK_SPACE:()=>i,KEY_C:()=>N,KEY_CANCEL:()=>n,KEY_CAPS_LOCK:()=>_,KEY_CLEAR:()=>a,KEY_CLOSE_BRACKET:()=>ct,KEY_COMMA:()=>tt,KEY_CONTEXT_MENU:()=>de,KEY_CONTROL:()=>l,KEY_D:()=>j,KEY_DASH:()=>rt,KEY_DECIMAL:()=>Se,KEY_DELETE:()=>v,KEY_DIVIDE:()=>ve,KEY_DOWN:()=>C,KEY_E:()=>I,KEY_END:()=>m,KEY_EQUALS:()=>et,KEY_ESCAPE:()=>h,KEY_F:()=>H,KEY_F1:()=>be,KEY_F10:()=>xe,KEY_F11:()=>Ye,KEY_F12:()=>Ve,KEY_F13:()=>Ne,KEY_F14:()=>je,KEY_F15:()=>Ie,KEY_F16:()=>He,KEY_F17:()=>ke,KEY_F18:()=>We,KEY_F19:()=>Be,KEY_F2:()=>Le,KEY_F20:()=>ze,KEY_F21:()=>qe,KEY_F22:()=>$e,KEY_F23:()=>Ge,KEY_F24:()=>Qe,KEY_F3:()=>Pe,KEY_F4:()=>Ue,KEY_F5:()=>Te,KEY_F6:()=>Ke,KEY_F7:()=>Fe,KEY_F8:()=>Re,KEY_F9:()=>Me,KEY_FIREFOX_ENTER:()=>lt,KEY_FIREFOX_EQUALS:()=>Et,KEY_FIREFOX_META:()=>ht,KEY_FIREFOX_SEMICOLON:()=>dt,KEY_FIREFOX_SEPARATOR:()=>_t,KEY_G:()=>k,KEY_H:()=>W,KEY_HELP:()=>o,KEY_HOME:()=>g,KEY_I:()=>B,KEY_INSERT:()=>S,KEY_J:()=>z,KEY_K:()=>q,KEY_L:()=>$,KEY_LEFT:()=>w,KEY_LEFT_CMD:()=>ue,KEY_M:()=>G,KEY_MULTIPLY:()=>Oe,KEY_N:()=>Q,KEY_NUMPAD0:()=>Ee,KEY_NUMPAD1:()=>_e,KEY_NUMPAD2:()=>he,KEY_NUMPAD3:()=>fe,KEY_NUMPAD4:()=>ye,KEY_NUMPAD5:()=>pe,KEY_NUMPAD6:()=>me,KEY_NUMPAD7:()=>ge,KEY_NUMPAD8:()=>we,KEY_NUMPAD9:()=>Ae,KEY_NUM_LOCK:()=>Je,KEY_O:()=>J,KEY_OPEN_BRACKET:()=>st,KEY_P:()=>X,KEY_PAGE_DOWN:()=>p,KEY_PAGE_UP:()=>y,KEY_PAUSE:()=>E,KEY_PERIOD:()=>nt,KEY_PRINTSCREEN:()=>D,KEY_Q:()=>Z,KEY_QUOTE:()=>ut,KEY_R:()=>ee,KEY_RETURN:()=>c,KEY_RIGHT:()=>O,KEY_RIGHT_CMD:()=>le,KEY_S:()=>te,KEY_SCROLL_LOCK:()=>Xe,KEY_SEMICOLON:()=>Ze,KEY_SHIFT:()=>u,KEY_SLASH:()=>ot,KEY_SPACE:()=>f,KEY_SUBTRACT:()=>De,KEY_T:()=>re,KEY_TAB:()=>s,KEY_U:()=>ne,KEY_UP:()=>A,KEY_V:()=>oe,KEY_W:()=>ie,KEY_X:()=>se,KEY_Y:()=>ae,KEY_Z:()=>ce,VALUE_0:()=>jt,VALUE_1:()=>It,VALUE_2:()=>Ht,VALUE_3:()=>kt,VALUE_4:()=>Wt,VALUE_5:()=>Bt,VALUE_6:()=>zt,VALUE_7:()=>qt,VALUE_8:()=>$t,VALUE_9:()=>Gt,VALUE_A:()=>Qt,VALUE_ADD:()=>Yr,VALUE_ALT:()=>Dt,VALUE_B:()=>Jt,VALUE_BACK_QUOTE:()=>wn,VALUE_BACK_SLASH:()=>On,VALUE_BACK_SPACE:()=>pt,VALUE_C:()=>Xt,VALUE_CANCEL:()=>ft,VALUE_CAPS_LOCK:()=>vt,VALUE_CLEAR:()=>gt,VALUE_CLOSE_BRACKET:()=>Cn,VALUE_COMMA:()=>yn,VALUE_CONTEXT_MENU:()=>Sr,VALUE_CONTROL:()=>Ct,VALUE_D:()=>Zt,VALUE_DASH:()=>pn,VALUE_DECIMAL:()=>Nr,VALUE_DELETE:()=>Nt,VALUE_DIVIDE:()=>jr,VALUE_DOWN:()=>xt,VALUE_E:()=>er,VALUE_END:()=>Tt,VALUE_ENTER:()=>wt,VALUE_EQUALS:()=>fn,VALUE_ESCAPE:()=>bt,VALUE_F:()=>tr,VALUE_F1:()=>Ir,VALUE_F10:()=>Qr,VALUE_F11:()=>Jr,VALUE_F12:()=>Xr,VALUE_F13:()=>Zr,VALUE_F14:()=>en,VALUE_F15:()=>tn,VALUE_F16:()=>rn,VALUE_F17:()=>nn,VALUE_F18:()=>on,VALUE_F19:()=>sn,VALUE_F2:()=>Hr,VALUE_F20:()=>an,VALUE_F21:()=>cn,VALUE_F22:()=>un,VALUE_F23:()=>ln,VALUE_F24:()=>dn,VALUE_F3:()=>kr,VALUE_F4:()=>Wr,VALUE_F5:()=>Br,VALUE_F6:()=>zr,VALUE_F7:()=>qr,VALUE_F8:()=>$r,VALUE_F9:()=>Gr,VALUE_G:()=>rr,VALUE_H:()=>nr,VALUE_HELP:()=>yt,VALUE_HOME:()=>Kt,VALUE_I:()=>or,VALUE_INSERT:()=>Vt,VALUE_J:()=>ir,VALUE_K:()=>sr,VALUE_L:()=>ar,VALUE_LEFT:()=>Ft,VALUE_LEFT_CMD:()=>Cr,VALUE_M:()=>cr,VALUE_META:()=>Or,VALUE_MULTIPLY:()=>xr,VALUE_N:()=>ur,VALUE_NUMPAD0:()=>vr,VALUE_NUMPAD1:()=>br,VALUE_NUMPAD2:()=>Lr,VALUE_NUMPAD3:()=>Pr,VALUE_NUMPAD4:()=>Ur,VALUE_NUMPAD5:()=>Tr,VALUE_NUMPAD6:()=>Kr,VALUE_NUMPAD7:()=>Fr,VALUE_NUMPAD8:()=>Rr,VALUE_NUMPAD9:()=>Mr,VALUE_NUM_LOCK:()=>En,VALUE_O:()=>lr,VALUE_OPEN_BRACKET:()=>An,VALUE_P:()=>dr,VALUE_PAGE_DOWN:()=>Ut,VALUE_PAGE_UP:()=>Pt,VALUE_PAUSE:()=>St,VALUE_PERIOD:()=>mn,VALUE_PRINTSCREEN:()=>Yt,VALUE_Q:()=>Er,VALUE_QUOTE:()=>Dn,VALUE_R:()=>_r,VALUE_RETURN:()=>At,VALUE_RIGHT:()=>Mt,VALUE_RIGHT_CMD:()=>Dr,VALUE_S:()=>hr,VALUE_SCROLL_LOCK:()=>_n,VALUE_SEMICOLON:()=>hn,VALUE_SHIFT:()=>Ot,VALUE_SLASH:()=>gn,VALUE_SPACE:()=>Lt,VALUE_SUBTRACT:()=>Vr,VALUE_T:()=>fr,VALUE_TAB:()=>mt,VALUE_U:()=>yr,VALUE_UP:()=>Rt,VALUE_V:()=>pr,VALUE_W:()=>mr,VALUE_X:()=>gr,VALUE_Y:()=>wr,VALUE_Z:()=>Ar});var n=3,o=6,i=8,s=9,a=12,c=13,u=16,l=17,d=18,E=19,_=20,h=27,f=32,y=33,p=34,m=35,g=36,w=37,A=38,O=39,C=40,D=44,S=45,v=46,b=48,L=49,P=50,U=51,T=52,K=53,F=54,R=55,M=56,x=57,Y=65,V=66,N=67,j=68,I=69,H=70,k=71,W=72,B=73,z=74,q=75,$=76,G=77,Q=78,J=79,X=80,Z=81,ee=82,te=83,re=84,ne=85,oe=86,ie=87,se=88,ae=89,ce=90,ue=91,le=92,de=93,Ee=96,_e=97,he=98,fe=99,ye=100,pe=101,me=102,ge=103,we=104,Ae=105,Oe=106,Ce=107,De=109,Se=110,ve=111,be=112,Le=113,Pe=114,Ue=115,Te=116,Ke=117,Fe=118,Re=119,Me=120,xe=121,Ye=122,Ve=123,Ne=124,je=125,Ie=126,He=127,ke=128,We=129,Be=130,ze=131,qe=132,$e=133,Ge=134,Qe=135,Je=144,Xe=145,Ze=186,et=187,tt=188,rt=189,nt=190,ot=191,it=192,st=219,at=220,ct=221,ut=222,lt=14,dt=59,Et=61,_t=108,ht=224,ft="Cancel",yt="Help",pt="Backspace",mt="Tab",gt="Clear",wt="Enter",At="Enter",Ot="Shift",Ct="Control",Dt="Alt",St="Pause",vt="CapsLock",bt="Escape",Lt=" ",Pt="PageUp",Ut="PageDown",Tt="End",Kt="Home",Ft="ArrowLeft",Rt="ArrowUp",Mt="ArrowRight",xt="ArrowDown",Yt="PrintScreen",Vt="Insert",Nt="Delete",jt="0",It="1",Ht="2",kt="3",Wt="4",Bt="5",zt="6",qt="7",$t="8",Gt="9",Qt="a",Jt="b",Xt="c",Zt="d",er="e",tr="f",rr="g",nr="h",or="i",ir="j",sr="k",ar="l",cr="m",ur="n",lr="o",dr="p",Er="q",_r="r",hr="s",fr="t",yr="u",pr="v",mr="w",gr="x",wr="y",Ar="z",Or="Meta",Cr="Meta",Dr="Meta",Sr="ContextMenu",vr="0",br="1",Lr="2",Pr="3",Ur="4",Tr="5",Kr="6",Fr="7",Rr="8",Mr="9",xr="*",Yr="+",Vr="-",Nr=".",jr="/",Ir="F1",Hr="F2",kr="F3",Wr="F4",Br="F5",zr="F6",qr="F7",$r="F8",Gr="F9",Qr="F10",Jr="F11",Xr="F12",Zr="F13",en="F14",tn="F15",rn="F16",nn="F17",on="F18",sn="F19",an="F20",cn="F21",un="F22",ln="F23",dn="F24",En="NumLock",_n="ScrollLock",hn=";",fn="=",yn=",",pn="-",mn=".",gn="/",wn="`",An="[",On="\\",Cn="]",Dn="'",Sn="Unidentified",vn="Escape",bn="Minus",Ln="Minus",Pn="Equal",Un="Backspace",Tn="Tab",Kn="Enter",Fn="Enter",Rn="ShiftLeft",Mn="ShiftRight",xn="ControlLeft",Yn="ControlRight",Vn="AltLeft",Nn="AltRight",jn="Pause",In="CapsLock",Hn="Space",kn="PageUp",Wn="PageDown",Bn="End",zn="Home",qn="ArrowLeft",$n="ArrowUp",Gn="ArrowRight",Qn="ArrowDown",Jn="PrintScreen",Xn="Insert",Zn="Delete",eo="Digit0",to="Digit1",ro="Digit2",no="Digit3",oo="Digit4",io="Digit5",so="Digit6",ao="Digit7",co="Digit8",uo="Digit9",lo="KeyA",Eo="KeyB",_o="KeyC",ho="KeyD",fo="KeyE",yo="KeyF",po="KeyG",mo="KeyH",go="KeyI",wo="KeyJ",Ao="KeyK",Oo="KeyL",Co="KeyM",Do="KeyN",So="KeyO",vo="KeyP",bo="KeyQ",Lo="KeyR",Po="KeyS",Uo="KeyT",To="KeyU",Ko="KeyV",Fo="KeyW",Ro="KeyX",Mo="KeyY",xo="KeyZ",Yo="MetaLeft",Vo="OSLeft",No="MetaRight",jo="OSRight",Io="ContextMenu",Ho="Numpad0",ko="Numpad1",Wo="Numpad2",Bo="Numpad3",zo="Numpad4",qo="Numpad5",$o="Numpad6",Go="Numpad7",Qo="Numpad8",Jo="Numpad9",Xo="NumpadMultiply",Zo="NumpadAdd",ei="NumpadSubtract",ti="NumpadDecimal",ri="NumpadDivide",ni="NumpadEnter",oi="F1",ii="F2",si="F3",ai="F4",ci="F5",ui="F6",li="F7",di="F8",Ei="F9",_i="F10",hi="F11",fi="F12",yi="F13",pi="F14",mi="F15",gi="F16",wi="F17",Ai="F18",Oi="F19",Ci="F20",Di="F21",Si="F22",vi="F23",bi="F24",Li="NumLock",Pi="ScrollLock",Ui="Semicolon",Ti="Comma",Ki="Period",Fi="Slash",Ri="Backquote",Mi="BracketLeft",xi="Backslash",Yi="BracketRight",Vi="Quote"},3940:(e,t,r)=>{r.r(t),r.d(t,{__extends:()=>o,__assign:()=>i,__rest:()=>s,__decorate:()=>a,__param:()=>c,__metadata:()=>u,__awaiter:()=>l,__generator:()=>d,__createBinding:()=>E,__exportStar:()=>_,__values:()=>h,__read:()=>f,__spread:()=>y,__spreadArrays:()=>p,__spreadArray:()=>m,__await:()=>g,__asyncGenerator:()=>w,__asyncDelegator:()=>A,__asyncValues:()=>O,__makeTemplateObject:()=>C,__importStar:()=>S,__importDefault:()=>v,__classPrivateFieldGet:()=>b,__classPrivateFieldSet:()=>L});var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function a(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function d(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var E=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function _(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||E(t,e,r)}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function p(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n}function m(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||t)}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function w(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=o[e](t)).value instanceof g?Promise.resolve(r.value.v).then(c,u):l(i[0][2],r)}catch(e){l(i[0][3],e)}var r}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function A(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:g(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function O(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=h(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,o,(t=e[r](t)).done,t.value)}))}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var D=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&E(t,e,r);return D(t,e),t}function v(e){return e&&e.__esModule?e:{default:e}}function b(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function L(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}}}]);
//# sourceMappingURL=319.js.map